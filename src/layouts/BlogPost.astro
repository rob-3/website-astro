---
import type { CollectionEntry } from "astro:content";
import BaseLayout from "./BaseLayout.astro";
import "../styles/blog.css";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<BaseLayout {title}>
	<div class="flex flex-col items-center m-4 sm:m-6">
		<main class="w-full md:max-w-3xl px-4 sm:px-8 py-2 sm:py-6 bg-slate-100 rounded">
			<article>
				<h1 class="py-4">{title}</h1>
				{
					pubDate && (
						<div>
							<time class="dateline" datetime={pubDate.toISOString()}>
								{pubDate.toLocaleString(undefined, {
									dateStyle: "short",
									timeStyle: "short",
								})}
							</time>
						</div>
					)
				}
				{
					updatedDate && (
						<div class="text-sm">
							<span>
								{"Last updated "}
								<time datetime={updatedDate.toISOString()}>
									{updatedDate.toLocaleString(undefined, {
										dateStyle: "short",
										timeStyle: "short",
									})}
								</time>
							</span>
						</div>
					)
				}
				<slot />
			</article>
			<div class="mt-6 items-center">
				<form class="my-grid">
					<div class="my-back">
					<a href="/blog">‚Üê All Posts</a>
					</div>
					<input class="my-form px-4 py-2 flex-grow rounded border border-gray-200" type="email" pattern=".+@.+" />
					<button class="submit text-white border border-solid border-black px-4 py-2 talk-link rounded bg-black hover:bg-[rgba(0,0,0,0)] hover:text-black transition-all" type="submit">Subscribe</button>
					<div class="my-email text-right">
						<a href="mailto:blog@robertboyd.dev">Email me!</a>
					</div>
				</form>
			</div>
		</main>
	</div>
</BaseLayout>

<style>
.my-form {
	grid-area: center-left;
}
.my-back {
	grid-area: left;
}
.submit {
	grid-area: center-right;
}
.my-email {
	grid-area: right;
}
.my-grid {
	display: grid;
	align-items: center;
	gap: 1rem;
	grid-template-columns: auto 1fr auto auto;
	grid-template-areas: "left center-left center-right right";
}
@media (max-width: 639px) {
	.my-form {
		grid-area: top;
	}
	.my-back {
		grid-area: left;
	}
	.submit {
		grid-area: center;
	}
	.my-email {
		grid-area: right;
	}
	.my-grid {
		align-items: center;
		gap: 1rem;
		grid-template-columns: 1fr auto 1fr;
		grid-template-rows: auto auto;
		grid-template-areas:
			"top top top"
			"left center right";
	}
}
</style>
